webpackJsonp([8],{"0hxb":function(e,t,n){"use strict";var r=n("//Fk"),o=n.n(r),a=n("Cvgy");t.a={login:function(e,t){var n=this;return a.a.post("/auth/login",{username:e,password:t}).then(function(e){return console.log("Successful login, store the access, refresh tokens",e.data.access_token,e.data.refresh_token),n.setAccessToken(e.data.access_token),n.setRefreshToken(e.data.refresh_token),e}).catch(function(e){return console.log("Unsuccessful login. Response:",e),n.removeAccessToken(),n.removeRefreshToken(),o.a.reject(e)})},logout:function(){this.removeAccessToken(),this.removeRefreshToken()},checkAccessToken:function(){var e={headers:{Authorization:"Bearer "+this.getAccessToken()}};return a.a.get("/auth/token-check",e)},setAccessToken:function(e){localStorage.setItem("access_token",e)},getAccessToken:function(){return localStorage.getItem("access_token")||!1},removeAccessToken:function(){return localStorage.removeItem("access_token")},setRefreshToken:function(e){localStorage.setItem("refresh_token",e)},getRefreshToken:function(){return localStorage.getItem("refresh_token")||!1},removeRefreshToken:function(){return localStorage.removeItem("refresh_token")},refreshAccessToken:function(){var e=this,t={headers:this.getRefreshHeader()};return a.a.post("/auth/refresh",{},t).then(function(t){console.log("refresh token response:",t),e.setAccessToken(t.data.access_token)})},getAuthorizationHeader:function(){var e=this.getAccessToken();return e?{Authorization:"Bearer "+e}:{}},getRefreshHeader:function(){var e=this.getRefreshToken();return e?{Authorization:"Bearer "+e}:{}},hasTokens:function(){return!(!this.getAccessToken()||!this.getRefreshToken())},authGuard:function(e,t,n){var r=this;this.checkAccessToken().then(function(e){console.debug("server says access token is valid:",e),n()}).catch(function(t){console.debug("access token bad or expired",t),422!==t.response.status&&401!==t.response.status||r.refreshAccessToken().then(function(e){console.debug("token refresh successful."),n()}).catch(function(t){console.error("unable to refresh access token, redirect to login.",t),n({name:"Login",query:{redirect:e.fullPath}})})})}}},"5AqT":function(e,t){},"7zck":function(e,t){},Cvgy:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return u});var r=n("//Fk"),o=n.n(r),a=n("mtWM"),s=n.n(a),i=n("ohbN"),c="/api/v1",u=s.a.create({baseURL:"http://bitspatial.com"});u.interceptors.response.use(function(e){return e},function(e){return 401===e.response.status?(i.a.$emit("errors:401",e),console.log("errors:401"),o.a.reject(e)):422===e.response.status?(i.a.$emit("errors:422",e),console.log("errors:422"),o.a.reject(e)):(i.a.$emit("error",e),console.log("error",e),o.a.reject(e))})},D4uH:function(e,t,n){"use strict";var r={},o={name:"icon",props:{name:{type:String,validator:function(e){return e?e in r||(console.warn('Invalid prop: prop "name" is referring to an unregistered icon "'+e+'".\nPlease make sure you have imported this icon before using it.'),!1):(console.warn('Invalid prop: prop "name" is required.'),!1)}},scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:function(e){return"horizontal"===e||"vertical"===e}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var e=this.scale;return e=void 0===e?1:Number(e),isNaN(e)||e<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):e*this.outerScale},klass:function(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse}},icon:function(){return this.name?r[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var e=this.icon,t=e.width,n=e.height;return Math.max(t,n)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw:function(){if(!this.icon||!this.icon.raw)return null;var e=this.icon.raw,t={};return e=e.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,function(e,n,r){var o="fa-"+(a++).toString(16);return t[r]=o,' id="'+o+'"'}),e=e.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,function(e,n,r,o){var a=n||o;return a&&t[a]?"#"+t[a]:e}),e}},mounted:function(){var e=this;if(!this.icon){this.$children.forEach(function(t){t.outerScale=e.normalizedScale});var t=0,n=0;this.$children.forEach(function(e){t=Math.max(t,e.width),n=Math.max(n,e.height)}),this.childrenWidth=t,this.childrenHeight=n,this.$children.forEach(function(e){e.x=(t-e.width)/2,e.y=(n-e.height)/2})}},register:function(e){for(var t in e){var n=e[t];n.paths||(n.paths=[]),n.d&&n.paths.push({d:n.d}),n.polygons||(n.polygons=[]),n.points&&n.polygons.push({points:n.points}),r[t]=n}},icons:r},a=870711;var s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{class:e.klass,style:e.style,attrs:{version:"1.1",role:e.label?"img":"presentation","aria-label":e.label,x:e.x,y:e.y,width:e.width,height:e.height,viewBox:e.box}},[e._t("default",[e.icon&&e.icon.paths?e._l(e.icon.paths,function(t,r){return n("path",e._b({key:"path-"+r},"path",t,!1))}):e._e(),e._v(" "),e.icon&&e.icon.polygons?e._l(e.icon.polygons,function(t,r){return n("polygon",e._b({key:"polygon-"+r},"polygon",t,!1))}):e._e(),e._v(" "),e.icon&&e.icon.raw?[n("g",{domProps:{innerHTML:e._s(e.raw)}})]:e._e()])],2)},staticRenderFns:[]};var i=n("VU/8")(o,s,!1,function(e){n("5AqT")},null,null);t.a=i.exports},KbKR:function(e,t,n){"use strict";var r=n("Cvgy"),o=n("0hxb");t.a={getProjects:function(){return r.a.get(r.b+"/projects")},getAllProjects:function(){return r.a.get(r.b+"/projects",{headers:o.a.getAuthorizationHeader()})},getProject:function(e){return r.a.get(r.b+"/project/"+e,{headers:o.a.getAuthorizationHeader()})},createProject:function(e){return r.a.post(r.b+"/project/new",e,{headers:o.a.getAuthorizationHeader()})},updateProject:function(e){return r.a.put(r.b+"/project/"+e.id,e,{headers:o.a.getAuthorizationHeader()})},deleteProject:function(e){return r.a.delete(r.b+"/project/"+e.id,{headers:o.a.getAuthorizationHeader()})}}},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),o=(n("Epmo"),n("rKHj"),n("OHUv"),n("D4uH")),a=n("uwSr"),s={name:"App",components:{Icon:o.a,Projects:a.default}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",[t("router-view")],1)},staticRenderFns:[]};var c=n("VU/8")(s,i,!1,function(e){n("yuhm")},null,null).exports,u=n("/ocq"),l={render:function(){var e=this.$createElement;return(this._self._c||e)("img",{staticClass:"logo",attrs:{src:"static/bs-logo.svg"}})},staticRenderFns:[]};var h=n("VU/8")(null,l,!1,function(e){n("n8XJ")},null,null).exports,p={name:"App",components:{Icon:o.a,Projects:a.default,Logo:h},data:function(){return{show_tabs:!1,current_tab_index:1,info_tabs:[{title:"Projects"},{title:"Background"}]}}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-content",[n("v-container",{attrs:{"fill-height":""}},[n("v-layout",{attrs:{row:"",wrap:"","align-center":""}},[n("v-flex",{attrs:{xs12:"",md4:"","align-center":""}},[n("div",{staticClass:"text-xs-center"},[n("v-avatar",{attrs:{size:"125px"}},[n("img",{staticClass:"img-circle elevation-7 mb-1",attrs:{src:"https://avatars2.githubusercontent.com/u/4192023?s=460&v=4"}})]),e._v(" "),n("div",{staticClass:"headline "},[e._v("Adam Valair")]),e._v(" "),n("div",{staticClass:"job-title text-xs-center grey--text text--darken-1 pt-2 pb-4"},[e._v("Developer & Spatial Analyst")]),e._v(" "),n("v-layout",{attrs:{"justify-center":""}},[n("a",{staticClass:"mr-5 body-2",attrs:{target:"_blank",href:"https://github.com/spatialbits"}},[n("icon",{staticClass:"grey--text text--darken-2",attrs:{name:"github",label:"GitHub",scale:"1.25"}})],1),e._v(" "),n("a",{staticClass:"body-2",attrs:{target:"_blank",href:"https://www.linkedin.com/in/adam-valair-a4316b25/"}},[n("icon",{staticClass:"grey--text text--darken-2",attrs:{name:"linkedin",label:"LinkedIn",scale:"1.25"}})],1),e._v(" "),n("a",{staticClass:"ml-5 body-2",attrs:{href:"mailto:adam@bitspatial.com"}},[n("icon",{staticClass:"grey--text text--darken-2",attrs:{name:"envelope",label:"Email",scale:"1.25"}})],1)]),e._v(" "),e.show_tabs?n("v-tabs",{staticClass:"pt-4",attrs:{"fixed-tabs":""},model:{value:e.current_tab_index,callback:function(t){e.current_tab_index=t},expression:"current_tab_index"}},e._l(e.info_tabs,function(t){return n("v-tab",{key:e.info_tabs[t],attrs:{to:{name:t.title}}},[e._v("\n              "+e._s(t.title)+"\n            ")])})):e._e(),e._v(" "),n("br"),n("br")],1)]),e._v(" "),n("v-flex",{attrs:{xs12:"",md7:"","offset-md1":"","align-center":""}},[n("transition",{attrs:{name:"fade"}},[n("router-view")],1)],1)],1)],1),e._v(" "),n("v-footer",{staticClass:"mb-3",attrs:{fixed:""}},[n("v-spacer"),e._v(" "),n("div",[n("v-tooltip",{attrs:{left:""}},[n("logo",{staticClass:"mb-5",staticStyle:{width:"22px"},attrs:{slot:"activator"},slot:"activator"}),e._v(" "),n("span",[e._v("Adam Valair")])],1)],1)],1)],1)},staticRenderFns:[]};var f=n("VU/8")(p,d,!1,function(e){n("S3DY")},null,null).exports,v=n("0hxb"),m=function(){return n.e(0).then(n.bind(null,"6/9U"))};r.a.use(u.a);var g=new u.a({mode:"history",routes:[{path:"/",name:"HomeView",component:f,redirect:{name:"Background"},children:[{path:"/projects/",name:"Projects",component:function(){return new Promise(function(e){e()}).then(n.bind(null,"uwSr"))}},{path:"/project/:project_id_prop/",props:!0,name:"Project",component:function(){return n.e(4).then(n.bind(null,"wa3q"))}},{path:"/background/",name:"Background",component:function(){return n.e(5).then(n.bind(null,"SAI9"))}}]},{path:"/",name:"Authorized",component:function(){return n.e(1).then(n.bind(null,"WOBE"))},children:[{path:"/project/new",props:{project_id_prop:null},name:"ProjectCreate",component:m,meta:{authRequired:!0}},{path:"/project/:project_id_prop/edit",props:!0,name:"ProjectEdit",component:m,meta:{authRequired:!0}},{path:"/admin",name:"Admin",component:function(){return n.e(3).then(n.bind(null,"oMO9"))},meta:{authRequired:!0}},{path:"/login",name:"Login",component:function(){return n.e(2).then(n.bind(null,"c0mh"))}}]},{path:"*",props:{iconCode:"info",httpCode:"404",message:"Huh."},component:function(){return n.e(6).then(n.bind(null,"thLP"))},name:"404-view"}]});g.beforeEach(function(e,t,n){e.matched.some(function(e){return e.meta.authRequired})?v.a.hasTokens()?n():n({name:"Login",query:{redirect:e.fullPath}}):n()});var _=g,b=n("3EgV"),k=n.n(b);n("7zck");r.a.use(k.a),r.a.config.productionTip=!1,new r.a({el:"#app",router:_,components:{App:c,Icon:o.a},template:"<App/>"})},S3DY:function(e,t){},n8XJ:function(e,t){},ohbN:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=new(n("7+uW").a)},uwSr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("KbKR"),o={props:{project:{type:Object,default:function(){}}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",{attrs:{hover:""}},[n("v-card-title",{staticClass:"title"},[e._v("\n      "+e._s(e.project.title)+"\n    ")]),e._v(" "),n("v-card-text",[n("span",[e._v(e._s(e.project.subtitle))])]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"blue--text",attrs:{flat:""},on:{click:function(t){e.$router.push({name:"Project",params:{project_id_prop:e.project.id}})}}},[e._v("Read More")])],1)],1)],1)},staticRenderFns:[]},s={components:{ProjectCard:n("VU/8")(o,a,!1,null,null,null).exports},data:function(){return{projects:[]}},created:function(){var e=this;r.a.getProjects().then(function(t){e.projects=t.data})}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{"grid-list-lg":""}},[n("v-layout",{attrs:{row:"",wrap:""}},e._l(e.projects,function(t){return n("v-flex",{key:e.projects[t],attrs:{xs12:""}},[n("project-card",{attrs:{project:t}})],1)}))],1)},staticRenderFns:[]},c=n("VU/8")(s,i,!1,null,null,null);t.default=c.exports},yuhm:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.b482d856bdbb458f57b9.js.map